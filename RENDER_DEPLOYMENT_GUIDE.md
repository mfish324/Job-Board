# Render Deployment Guide - Real Jobs, Real People

## ‚úÖ Pre-Deployment Checklist

Your app is now configured for Render deployment. Here's what was added:

### Files Created:
- ‚úÖ `render.yaml` - Render deployment configuration
- ‚úÖ `build.sh` - Build script for migrations and static files
- ‚úÖ Updated `requirements.txt` - Added production dependencies
- ‚úÖ Updated `settings.py` - Production-ready configuration
- ‚úÖ Updated `.env.example` - Added production environment variables

### Production Dependencies Added:
- `gunicorn` - WSGI server for production
- `psycopg2-binary` - PostgreSQL database adapter
- `whitenoise` - Static file serving
- `dj-database-url` - Database URL parsing

---

## üöÄ Deployment Steps

### Step 1: Push to GitHub

First, commit and push all changes:

```bash
git add .
git commit -m "Configure for Render deployment"
git push origin main
```

### Step 2: Create Render Account

1. Go to https://render.com
2. Sign up with your GitHub account
3. Authorize Render to access your repositories

### Step 3: Create New Web Service

1. Click **"New +"** ‚Üí **"Web Service"**
2. Connect your GitHub repository: `mfish324/Job-Board`
3. Render will detect `render.yaml` automatically
4. Click **"Apply"** to use the configuration

### Step 4: Configure Environment Variables

Render will create the web service and database. You need to add these environment variables:

**Required Variables** (click "Environment" tab):

```env
# Render auto-generates these:
SECRET_KEY              (auto-generated by Render)
DATABASE_URL            (auto-generated from database)
PYTHON_VERSION=3.11.0

# You must add these manually:
DEBUG=False
ALLOWED_HOSTS=your-app-name.onrender.com

# Twilio (your existing credentials)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890

# Email (Gmail settings)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-gmail-app-password
DEFAULT_FROM_EMAIL=noreply@realjobsrealpeople.net

# Site URL (use your Render URL)
SITE_URL=https://your-app-name.onrender.com

# Verification
PHONE_VERIFICATION_REQUIRED=True
EMAIL_VERIFICATION_REQUIRED=True
```

### Step 5: Deploy

1. Click **"Create Web Service"**
2. Render will:
   - Install dependencies from `requirements.txt`
   - Run `build.sh` (collect static files, run migrations)
   - Start gunicorn server
3. Monitor the deploy logs for any errors
4. Deployment takes ~5-10 minutes

### Step 6: Access Your Live Site

Once deployed, your site will be available at:
```
https://your-app-name.onrender.com
```

---

## üîß Post-Deployment Tasks

### 1. Create Superuser

You'll need to create an admin user. In Render dashboard:

1. Go to your web service ‚Üí **"Shell"** tab
2. Click **"Launch Shell"**
3. Run:
```bash
python manage.py createsuperuser
```

### 2. Test Twilio Integration

1. Sign up as a new user at: `https://your-app-name.onrender.com/signup/jobseeker/`
2. You should receive an SMS with verification code
3. Verify your phone works correctly

### 3. Test Email Verification

1. Check your email for verification link
2. Click the link to verify email
3. Confirm it redirects properly

### 4. Update Render Environment Variables

After first deploy, update:

```env
ALLOWED_HOSTS=your-actual-url.onrender.com
SITE_URL=https://your-actual-url.onrender.com
```

---

## üìä Database

Render automatically creates a PostgreSQL database:
- **Free tier**: 90-day limit, then requires upgrade
- **Connection**: Automatic via `DATABASE_URL`
- **Backups**: Not included in free tier

Your local SQLite database won't transfer. You'll start with a fresh database on Render.

---

## üé® Static Files

WhiteNoise handles static files:
- CSS, JavaScript, images served efficiently
- Files automatically compressed
- No separate CDN needed for basic deployment

---

## üí∞ Free Tier Limits

Render's free tier includes:
- ‚úÖ 750 hours/month (enough for 24/7)
- ‚úÖ Automatic HTTPS
- ‚úÖ Custom domains (with upgrade)
- ‚ö†Ô∏è Sleeps after 15 min inactivity (wakes on request)
- ‚ö†Ô∏è PostgreSQL free for 90 days

---

## üêõ Troubleshooting

### Build Fails

**Check build.sh has correct permissions:**
```bash
git update-index --chmod=+x build.sh
git commit -m "Make build.sh executable"
git push
```

### Static Files Not Loading

1. Check `STATIC_ROOT` in settings
2. Verify WhiteNoise in `MIDDLEWARE`
3. Run `python manage.py collectstatic` manually in Shell
4. Check browser console for 404 errors

### Database Connection Errors

1. Ensure `DATABASE_URL` is set correctly
2. Check `psycopg2-binary` is in requirements.txt
3. Verify database was created in Render dashboard

### Twilio Not Sending SMS

1. Verify all three Twilio env vars are set
2. Check Twilio console for error logs
3. Ensure phone number format is correct (+1234567890)
4. Verify Twilio account has credits

### Email Not Sending

1. Use Gmail App Password (not regular password)
2. Enable "Less secure app access" or use App Password
3. Check Django logs in Render dashboard
4. Verify `EMAIL_HOST_USER` and `EMAIL_HOST_PASSWORD`

### 500 Internal Server Error

1. Check Render logs: Dashboard ‚Üí Logs tab
2. Set `DEBUG=True` temporarily to see detailed errors
3. Remember to set `DEBUG=False` after fixing
4. Check `ALLOWED_HOSTS` includes your Render URL

---

## üîí Security Checklist

Before going live, verify:

- [ ] `DEBUG=False` in production
- [ ] `SECRET_KEY` is auto-generated by Render (don't use default)
- [ ] `ALLOWED_HOSTS` includes your Render URL
- [ ] HTTPS is working (automatic on Render)
- [ ] CSRF protection enabled
- [ ] SESSION_COOKIE_SECURE=True (automatic when DEBUG=False)
- [ ] No sensitive data in git repository
- [ ] `.env` file is in `.gitignore`

---

## üì± Testing Verification Flow

### Phone Verification Test:
1. Sign up at: `https://your-app.onrender.com/signup/jobseeker/`
2. Enter phone number with country code: `+12345678900`
3. Check SMS for 6-digit code
4. Enter code on verification page
5. Verify redirect to profile

### Email Verification Test:
1. Check email inbox
2. Find verification email from `noreply@realjobsrealpeople.net`
3. Click verification link
4. Verify redirect to success page

---

## üîÑ Updating Your Deployed App

After making changes:

```bash
# Make your code changes
git add .
git commit -m "Description of changes"
git push origin main
```

Render automatically:
- Detects the push
- Rebuilds the app
- Runs migrations
- Deploys new version

---

## üí° Render Dashboard Features

### Logs
- Real-time application logs
- Build logs
- Error tracking

### Metrics
- Request count
- Response times
- Memory usage

### Shell Access
- Run Django management commands
- Debug database issues
- Create superuser

### Environment Variables
- Manage all settings
- Secure secret storage
- Easy updates

---

## üìû Support Resources

- **Render Docs**: https://render.com/docs
- **Django Deployment**: https://docs.djangoproject.com/en/5.2/howto/deployment/
- **Twilio Support**: https://www.twilio.com/docs
- **Your App Repo**: https://github.com/mfish324/Job-Board

---

## ‚úÖ Deployment Complete!

Once deployed, you'll have:
- ‚úÖ Live Django site with HTTPS
- ‚úÖ PostgreSQL database
- ‚úÖ Phone verification via Twilio
- ‚úÖ Email verification
- ‚úÖ Static files served
- ‚úÖ Professional URL

Your site will be accessible at: `https://your-app-name.onrender.com`

**Next Steps:**
1. Test complete user signup flow
2. Verify phone and email verification work
3. Create test job postings
4. Monitor Render logs for any issues
5. Share the URL and start testing!

---

**Good luck with your deployment! üöÄ**
