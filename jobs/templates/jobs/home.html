{% extends 'jobs/base.html' %}

{% block title %}Home - Real Jobs, Real People - Find Your Dream Job{% endblock %}

{% block extra_css %}
<style>
    .hero-text {
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
        min-height: 4.5rem;
    }
    .hero-text.fade-out {
        opacity: 0;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section text-center">
    <div class="container">
        <h1 class="display-4 fw-bold mb-4 hero-text" id="heroText">Where Real Opportunities Meet Real People</h1>
        <div class="d-flex justify-content-center gap-3 mb-4">
            <a href="{% url 'job_list' %}" class="btn btn-light btn-lg px-5">
                <i class="bi bi-search me-2"></i>Browse Jobs
            </a>
            {% if not user.is_authenticated %}
            <a href="{% url 'signup_choice' %}" class="btn btn-outline-light btn-lg px-5">
                <i class="bi bi-person-plus me-2"></i>Get Started
            </a>
            {% endif %}
        </div>
    </div>
</div>

<!-- Stats Section -->
<div class="container mb-5">
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="bi bi-briefcase-fill text-primary" style="font-size: 3rem;"></i>
                    <h3 class="mt-3 mb-0 fw-bold">{{ total_jobs }}</h3>
                    <p class="text-muted mb-0">Active Jobs</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="bi bi-building text-primary" style="font-size: 3rem;"></i>
                    <h3 class="mt-3 mb-0 fw-bold">{{ total_companies.0 }}</h3>
                    <p class="text-muted mb-0">Companies Hiring</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="bi bi-people-fill text-primary" style="font-size: 3rem;"></i>
                    <h3 class="mt-3 mb-0 fw-bold">{{ total_seekers }}</h3>
                    <p class="text-muted mb-0">Job Seekers</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Jobs Section -->
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold mb-0">
            <i class="bi bi-clock-history me-2 text-primary"></i>Recent Job Postings
        </h2>
        <a href="{% url 'job_list' %}" class="btn btn-outline-primary">
            View All <i class="bi bi-arrow-right ms-1"></i>
        </a>
    </div>

    {% if recent_jobs %}
        <div class="row">
            {% for job in recent_jobs %}
            <div class="col-lg-6 mb-4">
                <div class="card job-card h-100">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <h5 class="card-title fw-bold mb-0">{{ job.title }}</h5>
                            {% if job.salary %}
                            <span class="badge bg-success">{{ job.salary }}</span>
                            {% endif %}
                        </div>
                        <h6 class="text-primary mb-3">
                            <i class="bi bi-building me-1"></i>{{ job.company }}
                        </h6>
                        <p class="card-text text-muted mb-3">
                            {{ job.description|striptags|truncatewords:25 }}
                        </p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="text-muted small">
                                <i class="bi bi-geo-alt-fill me-1"></i>{{ job.location }}
                                <span class="ms-3">
                                    <i class="bi bi-calendar3 me-1"></i>{{ job.posted_date|timesince }} ago
                                </span>
                            </div>
                            <a href="{% url 'job_detail' job.id %}" class="btn btn-primary btn-sm">
                                View Details <i class="bi bi-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="text-center mt-4">
            <a href="{% url 'job_list' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-briefcase me-2"></i>Explore All Opportunities
            </a>
        </div>
    {% else %}
        <div class="card">
            <div class="card-body text-center py-5">
                <i class="bi bi-inbox text-muted" style="font-size: 4rem;"></i>
                <h5 class="mt-3 text-muted">No jobs posted yet</h5>
                <p class="text-muted">Check back soon for new opportunities!</p>
                {% if user.is_authenticated and user.userprofile.user_type == 'employer' %}
                <a href="{% url 'post_job' %}" class="btn btn-primary mt-3">
                    <i class="bi bi-plus-circle me-2"></i>Post Your First Job
                </a>
                {% endif %}
            </div>
        </div>
    {% endif %}
</div>

<!-- CTA Section -->
{% if not user.is_authenticated %}
<div class="container my-5">
    <div class="card bg-primary text-white">
        <div class="card-body text-center py-5">
            <h3 class="fw-bold mb-3">Ready to Start Your Journey?</h3>
            <p class="lead mb-4">Join thousands of job seekers and employers on Real Jobs, Real People today</p>
            <div class="d-flex justify-content-center gap-3">
                <a href="{% url 'jobseeker_signup' %}" class="btn btn-light btn-lg">
                    <i class="bi bi-person me-2"></i>I'm Looking for Jobs
                </a>
                <a href="{% url 'employer_signup' %}" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-building me-2"></i>I'm Hiring
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block extra_js %}
<script>
    const heroTexts = [
        "Where Real Opportunities Meet Real People",
        "Your Next Chapter Starts Here",
        "Connecting Talent with Opportunity",
        "Jobs That Match Your Ambition",
        "Find Work That Works for You",
        "Real Jobs. Real Companies. Real Results.",
        "Your Career, Your Terms",
        "Where Careers Take Off",
        "More Than a Job Boardâ€”A Launchpad",
        "Discover Roles Worth Your Talent",
        "The Shortest Path to Your Next Role",
        "Built for Job Seekers, Not Algorithms"
    ];

    let currentIndex = 0;
    const heroElement = document.getElementById('heroText');

    function rotateHeroText() {
        // Fade out
        heroElement.classList.add('fade-out');

        setTimeout(() => {
            // Change text
            currentIndex = (currentIndex + 1) % heroTexts.length;
            heroElement.textContent = heroTexts[currentIndex];

            // Fade in
            heroElement.classList.remove('fade-out');
        }, 500); // Wait for fade-out to complete
    }

    // Start rotation after 8 seconds, then every 8 seconds
    setInterval(rotateHeroText, 8000);
</script>
{% endblock %}